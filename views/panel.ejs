<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <header>
        <h1>Panel de Control</h1>
        <!-- <a href="/logout">Cerrar sesi√≥n</a> -->
    </header>

    <!-- contenido principal -->
    <div class="main-content">
        <div class="container">
            <div class="page-title">
                <h2>Gesti√≥n de Acciones</h2>
                <button class="btn btn-primary" id="new-action-btn">+ Nueva Acci√≥n</button>
            </div>

            <!-- filtros -->
            

            <!-- tabla de acciones -->
            <div class="card">
                <h3>Lista de Acciones</h3>
                
                <table class="actions-table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Entidad</th>
                            <th>Email</th>
                            <th>Telefono</th>
                            <th>Fecha de inicio</th>
                            <th>Fecha de fin</th>
                            <th>Horarios</th>
                            <th>Tipo</th>
                            <th>Responsable(s)</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    
                    <tbody id="actions-body">
                        <% acciones.forEach(accion => { %>
                        <tr data-id="<%= accion._id %>">
                            <td><%= accion.nombre %></td>
                            <td><%= accion.entidad %></td>
                            <td><%= accion.email %></td>
                            <td><%= accion.telefono %></td>
                            <td><%= new Date(accion.fechaInicio).toLocaleDateString('es-ES') %></td>
                            <td><%= new Date(accion.fechaFin).toLocaleDateString('es-ES') %></td>
                            <td><%= accion.horarios %></td>
                            <td>
                                <% 
                                const tipos = {
                                    consulta: "Consulta",
                                    jornada: "Jornada",
                                    reunion: "Reuni√≥n",
                                    formacion: "Formaci√≥n",
                                    otros: "Otros"
                                };
                                %>
                                <%= tipos[accion.tipo] || accion.tipo %>
                            </td>
                            <td><%= accion.responsables.join(', ') %></td>
                            <td>
                                <span class="action-icon edit-icon" title="Editar">‚úèÔ∏è</span>
                                <span class="action-icon delete-icon" title="Eliminar">üóëÔ∏è</span>
                            </td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>

            <div class="card" id="action-form" style="display: none;">
                <h3 id="form-title">Nueva Acci√≥n</h3>
                
                <form id="accion-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombre">Nombre de la acci√≥n *</label>
                            <input type="text" id="nombre" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="asociacionEntidad">Asociaci√≥n/Entidad *</label>
                            <input type="text" id="asociacionEntidad" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="telefono">Tel√©fono</label>
                            <input type="tel" id="telefono" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fechaInicio">Fecha de inicio *</label>
                            <input type="date" id="fechaInicio" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="fechaFin">Fecha de fin *</label>
                            <input type="date" id="fechaFin" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="horarios">Horarios</label>
                        <input type="text" id="horarios" class="form-control" placeholder="Ej: De 9:00 a 14:00">
                    </div>

                    
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tipoAccion">Tipo de acci√≥n *</label>
                            <select id="tipoAccion" class="form-control" required>
                                <option value="">Seleccione un tipo</option>
                                <option value="consulta">Consulta</option>
                                <option value="jornada">Jornada/Premio uso del espacio</option>
                                <option value="reunion">Reuni√≥n/Coordinaci√≥n servicio t√©cnico</option>
                                <option value="formacion">Formaci√≥n</option>
                                <option value="otros">Otros</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Responsable(s) *</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="responsable-saregune" name="responsableAccion" value="Saregune">
                                    <label for="responsable-saregune">Saregune</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="responsable-elkarteak" name="responsableAccion" value="Elkarteak">
                                    <label for="responsable-elkarteak">Elkarteak</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="responsable-batekin" name="responsableAccion" value="Batekin">
                                    <label for="responsable-batekin">Batekin</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="responsable-auzotv" name="responsableAccion" value="AuzoTV">
                                    <label for="responsable-auzotv">AuzoTV</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="descripcion">Descripci√≥n</label>
                        <textarea id="descripcion" class="form-control" rows="4"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="web">Web</label>
                        <input type="url" id="web" class="form-control" placeholder="https://...">
                    </div>
                    
                    <div class="form-group">
                        <!-- <p><small>* Campos obligatorios</small></p> -->
                        <button type="submit" class="btn btn-primary">Guardar</button>
                        <button type="button" class="btn" id="cancel-form">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de confirmation -->
    <div id="delete-modal" class="modal" style="display:none;">
      <div class="modal-content">
        <p>¬øSeguro que quieres eliminar? Esta acci√≥n es irreversible.</p>
        <button id="confirm-delete" class="btn btn-danger">Eliminar</button>
        <button id="cancel-delete" class="btn">Cancelar</button>
      </div>
    </div>
    
    <script src="/app.js"></script>
</body>
</html>